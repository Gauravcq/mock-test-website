<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSC CGL Mock Test</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
/* =========================
   TESTBOOK‚ÄëLIKE THEME
   (HTML & main JS unchanged)
   ========================= */

:root {
    --primary: #1a73e8;
    --primary-dark: #0b5bd3;
    --accent: #00c853;
    --danger: #e53935;
    --text-main: #1f2933;
    --text-muted: #6b7280;
    --bg-page: #f3f4f6;
    --bg-card: #ffffff;
    --border-soft: #e5e7eb;

    --answered: #00c853;
    --not-answered: #ff5252;
    --marked-review: #7c4dff;
    --not-visited: #e5e7eb;
    --current-ring: #1a73e8;
}

*,
*::before,
*::after {
    box-sizing: border-box;
}

body {
    margin: 0;
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--bg-page);
    color: var(--text-main);
}

.hidden {
    display: none !important;
}

/* =========================
   MAIN LAYOUT
   ========================= */

.quiz-container {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background: #fff;
}

/* ---------- HEADER ---------- */

.quiz-header {
    background: #111827;
    color: #fff;
    padding: 6px 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

.header-left {
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 0;
}

.header-left h1#test-main-title {
    font-size: 0.9rem;
    font-weight: 600;
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.header-right {
    display: flex;
    align-items: center;
    gap: 10px;
}

/* Generic icon button */
.icon-btn {
    border: none;
    background: transparent;
    padding: 0;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Hamburger */
.mobile-only {
    display: none;
}

#palette-toggle {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    background: #1f2937;
    padding: 4px;
    flex-direction: column;
    gap: 4px;
}
#palette-toggle span {
    width: 100%;
    height: 2px;
    background: #f9fafb;
    border-radius: 999px;
}

/* Timer pill */
.timer-display {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 3px 10px;
    border-radius: 999px;
    background: rgba(31,41,55,0.85);
    font-size: 0.9rem;
    font-weight: 600;
}

.timer-icon {
    font-size: 0.85rem;
}
#timer {
    font-variant-numeric: tabular-nums;
}

/* Pause button (icon + text) */
.pause-btn {
    padding: 5px 10px;
    border-radius: 999px;
    background: #1f2937;
    border: 1px solid #4b5563;
    color: #f9fafb;
    font-size: 0.85rem;
    gap: 6px;
}
.pause-btn:hover {
    background: #374151;
}
.pause-icon {
    display: inline-flex;
    gap: 3px;
}
.pause-bar {
    width: 3px;
    height: 12px;
    border-radius: 2px;
    background: #f9fafb;
}
.pause-text {
    font-weight: 500;
}

/* =========================
   QUESTION + PALETTE
   ========================= */

.main-content-wrapper {
    display: flex;
    flex: 1;
    min-height: 0;
}

/* ---------- Question Area ---------- */

.question-area-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #f9fafb;
    border-right: 1px solid var(--border-soft);
    min-width: 0;
}

.question-header {
    padding: 10px 16px;
    border-bottom: 1px solid var(--border-soft);
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: #ffffff;
}

.question-header h2#question-title {
    margin: 0;
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-main);
}

.language-select {
    padding: 6px 10px;
    border-radius: 6px;
    border: 1px solid var(--border-soft);
    font-size: 0.9rem;
    background: #fff;
}

.question-content {
    flex: 1;
    overflow-y: auto;
    padding: 14px 16px 100px;
}

.question-text {
    font-size: 1rem;
    line-height: 1.6;
    font-weight: 500;
    margin-bottom: 14px;
    background: var(--bg-card);
    padding: 14px 16px;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(15,23,42,0.06);
}

.options-container {
    margin-top: 10px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.option {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 10px;
    background: #ffffff;
    border: 1px solid var(--border-soft);
    cursor: pointer;
    transition: background 0.15s, border-color 0.15s, box-shadow 0.15s;
    font-size: 0.95rem;
}
.option:hover {
    border-color: var(--primary);
    background: #eef4ff;
    box-shadow: 0 1px 4px rgba(37,99,235,0.18);
}
.option input[type="radio"] {
    accent-color: var(--primary);
    transform: scale(1.1);
}
.option span {
    flex: 1;
}

/* Footer nav */
.question-footer {
    position: sticky;
    bottom: 0;
    padding: 8px 10px;
    border-top: 1px solid var(--border-soft);
    background: #ffffff;
    display: flex;
    gap: 8px;
    align-items: center;
    justify-content: space-between;
}

.left-btns,
.right-btns {
    display: flex;
    gap: 8px;
}

.submit-btn-wrapper {
    display: none; /* you already have sidebar submit */
}

.btn {
    border-radius: 999px;
    border: 1px solid transparent;
    padding: 8px 14px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    white-space: nowrap;
}

.btn.primary {
    background: var(--primary);
    color: #fff;
}
.btn.primary:hover {
    background: var(--primary-dark);
}
.btn.secondary {
    background: #ffffff;
    color: var(--primary);
    border-color: var(--primary);
}
.btn.secondary:hover {
    background: #eff6ff;
}
.btn.tertiary {
    background: var(--danger);
    color: #fff;
}

/* ---------- Palette Sidebar ---------- */

.right-sidebar {
    width: 260px;
    background: #f9fafb;
    padding: 12px 12px 80px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    border-left: 1px solid var(--border-soft);
    overflow-y: auto;
}

.sidebar-info {
    font-size: 0.85rem;
    color: var(--text-muted);
}
.sidebar-info p {
    margin: 0 0 4px 0;
}
.user-info-row {
    display: flex;
    gap: 6px;
    font-size: 0.85rem;
}
.info-label { font-weight: 600; }
.info-value { font-weight: 500; }

/* Legend */
.palette-legend {
    display: flex;
    flex-wrap: wrap;
    gap: 6px 10px;
    padding: 8px 0;
    border-top: 1px solid var(--border-soft);
    border-bottom: 1px solid var(--border-soft);
    font-size: 0.75rem;
}
.legend-item {
    display: flex;
    align-items: center;
    gap: 4px;
}
.legend-box {
    width: 12px;
    height: 12px;
    border-radius: 999px;
    border: 1px solid #d1d5db;
}
.legend-box.answered { background: var(--answered); border-color: var(--answered); }
.legend-box.not-answered { background: var(--not-answered); border-color: var(--not-answered); }
.legend-box.marked-review { background: var(--marked-review); border-color: var(--marked-review); }
.legend-box.current { background: var(--current-ring); border-color: var(--current-ring); }

.question-palette {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
    margin: 10px 0 0;
}

.palette-btn {
    position: relative;
    width: 38px;
    height: 38px;
    border-radius: 10px;
    border: 1px solid var(--border-soft);
    background: #fff;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-main);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.15s, border-color 0.15s, box-shadow 0.15s, transform 0.1s;
}
.palette-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 1px 3px rgba(15,23,42,0.18);
}

.palette-btn.not-visited { background: var(--not-visited); }
.palette-btn.not-answered {
    background: var(--not-answered);
    border-color: var(--not-answered);
    color: #fff;
}
.palette-btn.answered {
    background: var(--answered);
    border-color: var(--answered);
    color: #fff;
}
.palette-btn.marked-review {
    background: var(--marked-review);
    border-color: var(--marked-review);
    color: #fff;
}
.palette-btn.answered-marked-review {
    background: var(--answered);
    border: 2px solid var(--marked-review);
    color: #fff;
}
.palette-btn.answered-marked-review::after {
    content: "‚úì";
    position: absolute;
    top: -4px;
    right: -4px;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: #fff;
    color: var(--answered);
    font-size: 0.75rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 4px rgba(0,0,0,0.3);
}
.palette-btn.current {
    box-shadow: 0 0 0 2px rgba(26,115,232,0.5);
    border-color: var(--current-ring) !important;
}

.sidebar-actions {
    margin-top: auto;
}
.sidebar-btn {
    width: 100%;
    padding: 9px 12px;
    border-radius: 999px;
    border: none;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
}
.sidebar-btn.tertiary {
    background: var(--danger);
    color: #fff;
}

/* Palette backdrop for mobile drawer */
.palette-backdrop {
    display: none;
}

/* =========================
   MODALS (Instructions, Pause, Submit)
   ========================= */

.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(15,23,42,0.55);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 50;
}

.modal-content {
    background: #fff;
    border-radius: 10px;
    max-width: 420px;
    width: 90%;
    padding: 22px 20px 18px;
    box-shadow: 0 12px 30px rgba(15,23,42,0.4);
    text-align: center;
}

.modal-content h2,
.modal-content .modal-title {
    margin: 0 0 10px;
    font-size: 1.15rem;
    font-weight: 700;
    color: var(--text-main);
}
.modal-content p {
    margin: 5px 0 0;
    font-size: 0.95rem;
    color: var(--text-muted);
}

.modal-actions {
    margin-top: 18px;
    display: flex;
    justify-content: center;
    gap: 10px;
}
.modal-actions .btn {
    flex: 1;
}

.instruction-list {
    list-style: none;
    padding: 0;
    margin: 10px 0 18px;
    text-align: left;
}
.instruction-list li {
    background: #f9fafb;
    margin-bottom: 8px;
    padding: 8px 10px;
    border-radius: 6px;
    border-left: 3px solid var(--primary);
    font-size: 0.9rem;
}

/* =========================
   RESULT & REVIEW (kept minimal)
   ========================= */

.result-container,
.review-container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 20px 16px 40px;
    background: #ffffff;
    min-height: 100vh;
}

.result-heading {
    font-size: 1.4rem;
    font-weight: 700;
    margin-bottom: 16px;
}

.results-header-nav {
    display: flex;
    overflow-x: auto;
    border-bottom: 1px solid var(--border-soft);
    margin-bottom: 16px;
}
.results-header-nav a {
    padding: 10px 16px;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-muted);
    text-decoration: none;
    white-space: nowrap;
    border-bottom: 2px solid transparent;
}
.results-header-nav a.active {
    color: var(--primary);
    border-color: var(--primary);
}

/* =========================
   MOBILE
   ========================= */

@media (max-width: 768px) {
  .mobile-only {
    display: inline-flex;
  }

  .quiz-header {
    padding: 8px 10px;
  }
  .header-left h1#test-main-title {
    max-width: 170px;
    font-size: 0.8rem;
  }

  .main-content-wrapper {
    flex-direction: column;
  }

  /* Palette drawer on mobile (unchanged) */
  .right-sidebar {
    display: none;
  }
  body.palette-open .right-sidebar {
    display: flex;
    position: fixed;
    top: 44px;
    right: 0;
    bottom: 0;
    width: 80%;
    max-width: 320px;
    z-index: 60;
    box-shadow: -4px 0 16px rgba(0,0,0,0.35);
  }
  body.palette-open .palette-backdrop {
    display: block;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.4);
    z-index: 55;
  }

  .question-area-main {
    border-right: none;
  }

  .question-content {
    padding: 12px 10px 80px;
  }

  /* ---------- BOTTOM BUTTONS: 4-COLUMN GRID ---------- */
  .question-footer {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    padding: 8px 10px;
    box-shadow: 0 -1px 4px rgba(15,23,42,0.08);
    background: #ffffff;

    display: grid;
    grid-template-columns: repeat(4, 1fr); /* Mark, Clear, Prev, Next */
    column-gap: 8px;
    row-gap: 6px;
    align-items: stretch;
  }

  /* Make wrappers not affect layout ‚Äì let buttons sit directly in grid */
  .question-footer .left-btns,
  .question-footer .right-btns {
    display: contents;
  }
  /* submit-btn-wrapper is still hidden by earlier rule, so no 5th button */

  .question-footer .btn {
    width: 100%;
    justify-content: center;
    padding: 10px 4px;
    font-size: 0.8rem;
    border-radius: 999px;
  }

  .result-container,
  .review-container {
    padding: 14px 10px 30px;
    border-radius: 0;
  }
}
/* =========================================
   CLEAN RESULT SUMMARY (Overview tab)
   ========================================= */

/* =========================================
   CLEAN RESULT SUMMARY LAYOUT
   ========================================= */

#result-summary-page {
  background: #f3f4f6;
}

/* Outer container */
.result-container {
  max-width: 960px;
  margin: 0 auto;
  padding: 16px 14px 40px;
  background: transparent;
}

/* Back link */
.go-back-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  margin-bottom: 10px;
  font-size: 0.9rem;
  text-decoration: none;
  color: #2563eb;
  font-weight: 500;
}
.go-back-btn:hover {
  text-decoration: underline;
}

/* Heading */
.result-heading {
  font-size: 1.4rem;
  font-weight: 700;
  margin: 0 0 10px;
  color: #111827;
}

/* Tabs */
.results-header-nav {
  display: flex;
  gap: 6px;
  border-bottom: 1px solid #e5e7eb;
  margin-bottom: 18px;
  overflow-x: auto;
}
.results-header-nav a {
  padding: 8px 14px;
  font-size: 0.9rem;
  font-weight: 600;
  color: #6b7280;
  text-decoration: none;
  white-space: nowrap;
  border-bottom: 2px solid transparent;
  cursor: pointer;
}
.results-header-nav a.active {
  color: #1d4ed8;
  border-color: #1d4ed8;
}

/* 2‚Äëcolumn layout: left (info), right (stats) */
.result-summary-content-wrapper {
  display: grid;
  grid-template-columns: minmax(0, 260px) minmax(0, 1fr);
  gap: 16px;
  align-items: flex-start;
}

/* LEFT: test info + buttons */
#review-button-area {
  background: #ffffff;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  padding: 14px 14px 16px;
  box-shadow: 0 4px 10px rgba(15,23,42,0.06);
  font-size: 0.9rem;
  color: #4b5563;
}

#review-button-area .test-details h3 {
  margin: 0 0 6px;
  font-size: 1rem;
  font-weight: 600;
  color: #111827;
}
#review-button-area .test-details p {
  margin: 2px 0;
  font-size: 0.85rem;
}

/* Buttons inside left card */
#review-button-area .action-buttons {
  margin-top: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
#review-button-area .action-buttons .btn {
  width: 100%;
  border-radius: 999px;
  padding: 8px 12px;
  font-size: 0.9rem;
  font-weight: 600;
  text-align: center;
}

/* RIGHT: stats cards grid */
#stats-cards-area .stats-grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 12px;
}

/* Stat cards */
.stat-card {
  background: #ffffff;
  border-radius: 12px;
  padding: 12px 14px 10px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 4px 8px rgba(15,23,42,0.05);
}

.stat-value {
  font-size: 1.5rem;
  font-weight: 700;
  line-height: 1.2;
  margin-bottom: 4px;
}

/* Label under value */
.stat-name {
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: #6b7280;
}

/* Emphasis colors */
.stat-card.total-score .stat-value { color: #4c1d95; }     /* purple */
.stat-card.correct .stat-value    { color: #16a34a; }      /* green */
.stat-card.incorrect .stat-value  { color: #dc2626; }      /* red */
.stat-card.unattempted .stat-value { color: #6b7280; }     /* gray */
.stat-card.time-taken .stat-value { color: #2563eb; }      /* blue */
.stat-card.accuracy .stat-value   { color: #0891b2; }      /* teal */

/* Mobile: stack columns */
@media (max-width: 768px) {
  .result-summary-content-wrapper {
    grid-template-columns: minmax(0, 1fr);
  }
}
</style>
</head>
 <body>

    <div id="instructions-modal" class="modal-overlay">
    <div class="modal-content">
        <h2 class="modal-title">Test Instructions</h2>
        
        <ul class="instruction-list">
            <li>
               <strong>Duration:</strong> The test duration is <strong id="duration-text">25 minutes</strong>.
            </li>
            <li>
                <strong>Scoring:</strong> Each question carries <strong>2 marks</strong>. There is a penalty of <strong>0.5 marks</strong> for each incorrect answer (Negative Marking).
            </li>
            <li>
                <strong>Navigation:</strong> Use the <strong>Question Palette</strong> on the right (or top on mobile) to navigate questions.
            </li>
            <li>
                <strong>Start:</strong> Click <strong>Start Test</strong> to begin the official timer and access the questions.
            </li>
        </ul>
        <button id="start-test-btn" class="btn primary">Start Test</button>
    </div>
</div>
    
    <div id="pause-overlay" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Test Paused</h2>
            <p>Your time has stopped. Click Resume to continue the test.</p>
            <button id="resume-btn" class="btn primary">Resume Test</button>
        </div>
    </div>

    <div id="submit-summary-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Confirm Submission</h2>
            <p>Are you sure you want to submit the test?</p>
            <div id="submission-stats" class="summary-stats">
            </div>
            <div class="modal-actions">
                <button id="cancel-submit-btn" class="btn secondary">Cancel</button>
                <button id="final-submit-btn" class="btn primary">Final Submit</button>
            </div>
        </div>
    </div>

    <div id="quiz-ui" class="quiz-container hidden">
        <div id="palette-backdrop" class="palette-backdrop hidden"></div>

     <header class="quiz-header">
    <div class="header-left">
        <h1 id="test-main-title">SSC CGL Mock Test</h1>
    </div>

    <div class="header-right">
        <!-- Hamburger for palette (mobile only) -->
        <button id="palette-toggle" class="icon-btn mobile-only" aria-label="Open question palette">
            <span></span><span></span><span></span>
        </button>

        <!-- Timer -->
        <div class="timer-display">
            <span class="timer-icon">‚è±</span>
            <span id="timer" class="timer-text">--:--</span>
        </div>

        <!-- New pause button (icon + text), id kept same for your JS -->
        <button id="pause-btn" class="icon-btn pause-btn" aria-label="Pause test">
            <span class="pause-icon">
                <span class="pause-bar"></span>
                <span class="pause-bar"></span>
            </span>
            <span class="pause-text">Pause</span>
        </button>
    </div>
</header>

        <div class="main-content-wrapper">
            
            <main class="question-area-main">
                <div class="question-header">
                    <h2 id="question-title">Question 1 of 25</h2>
                    <select class="language-select">
                        <option value="en">English</option>
                        <option value="hi">Hindi</option>
                    </select>
                </div>
                
                <div id="question-area" class="question-content">
                    </div>

                <footer class="question-footer">
                    <div class="left-btns">
                        <button id="mark-review-btn" class="btn secondary">Mark for Review & Next</button>
                        <button id="clear-response-btn" class="btn secondary">Clear Response</button>
                    </div>
                    <div class="submit-btn-wrapper">
                        <button id="submit-test-footer-btn" class="btn tertiary">Submit Test</button>
                    </div>
                    <div class="right-btns">
                        <button id="prev-btn" class="btn primary">Previous</button>
                        <button id="next-btn" class="btn primary">Save & Next</button>
                    </div>
                </footer>
            </main>

            <aside class="right-sidebar">
                <div class="sidebar-info">
                    <p>Candidate: [User Name]</p>
                    <div class="user-info-row">
    <div class="info-label">Subject Name:</div>
    <div class="info-value">
        <span id="test-name-display">Loading</span> 
    </div>
</div>
                </div>
                <div class="palette-legend">
                    <span class="legend-item"><span class="legend-box answered"></span> Answered (Green)</span>
                    <span class="legend-item"><span class="legend-box not-answered"></span> Not Answered (Red)</span>
                    <span class="legend-item"><span class="legend-box marked-review"></span> Marked for Review (Purple)</span>
                    <span class="legend-item"><span class="legend-box current"></span> Current Q (Blue)</span>
                </div>
                <div id="question-palette" class="question-palette">
                    </div>
                <div class="sidebar-actions">
                    <button id="submit-test-btn" class="sidebar-btn tertiary">Submit Test</button>
                </div>
            </aside>
        </div>
    </div> 
    
    <div id="result-summary-page" class="result-container hidden"> 
        <a href="index.html" class="go-back-btn">‚¨Ö Go Back to Tests</a>
    <h1 class="result-heading">Test Result Summary</h1>

        <div class="results-header-nav">
            <a class="active">Overview</a>
            <a>All</a>
            <a>Correct</a>
            <a>Incorrect</a>
            <a>Unattempted</a>
            <a>Marked For Review</a>
        </div>


        <div class="result-summary-content-wrapper">
            
            <div id="review-button-area"></div>

            <div id="stats-cards-area"></div>
            
        </div>
    </div> 
    
    <div id="review-page" class="review-container hidden">
        
        <h1 class="result-heading">Question Review</h1>

        <div class="results-header-nav">
            <a class="active">Overview</a>
            <a>All</a>
            <a>Correct</a>
            <a>Incorrect</a>
            <a>Unattempted</a>
            <a>Marked For Review</a>
        </div>

        <div class="review-main-content">
            
            <div class="review-question-area-wrapper">
                       <h2 id="review-question-title">Reviewing Question 1 of 25</h2>
                       <div id="review-question-area">
                            </div>
                       <footer class="review-footer">
                            <button id="review-prev-btn" class="btn primary">Previous Question</button>
                            <button id="review-next-btn" class="btn primary">Next Question</button>
                       </footer>
            </div>
            
            <aside class="review-sidebar">
                <div class="review-palette-container">
                    <h3 style="margin-top:0;">Question Palette</h3>
                    <div id="review-palette" class="question-palette">
                            </div>
                </div>
            </aside>
            
        </div>
        
    </div>
    <script>
  // Enhance ugly text stats into nice cards
  (function () {
    const statsRoot = document.getElementById('stats-cards-area');
    if (!statsRoot) return;

    function buildCards() {
      if (!statsRoot || statsRoot.dataset.enhanced === '1') return;

      // Grab raw text (what your current JS prints)
      const rawTxt = statsRoot.textContent || '';
      const cleaned = rawTxt.replace(/\s+/g, ' ').trim();
      if (!cleaned) return;

      // Split by spaces; we expect pattern like:
      // 0.00 YOUR SCORE 0 CORRECT 0 INCORRECT 25 UNATTEMPTED 00:06 TIME TAKEN 0.0% ACCURACY
      const parts = cleaned.split(' ');
      if (parts.length < 13) return; // not enough data, bail out

      const score      = parts[0];
      const correct    = parts[3];
      const incorrect  = parts[5];
      const unattempt  = parts[7];
      const timeTaken  = parts[9];
      const accuracy   = parts[12];

      // Build card markup
      statsRoot.innerHTML = `
        <div class="stats-grid">
          <div class="stat-card total-score">
            <div class="stat-label">Your Score</div>
            <div class="stat-value">${score}</div>
          </div>
          <div class="stat-card correct">
            <div class="stat-label">Correct</div>
            <div class="stat-value">${correct}</div>
          </div>
          <div class="stat-card incorrect">
            <div class="stat-label">Incorrect</div>
            <div class="stat-value">${incorrect}</div>
          </div>
          <div class="stat-card unattempted">
            <div class="stat-label">Unattempted</div>
            <div class="stat-value">${unattempt}</div>
          </div>
          <div class="stat-card time-taken">
            <div class="stat-label">Time Taken</div>
            <div class="stat-value">${timeTaken}</div>
          </div>
          <div class="stat-card accuracy">
            <div class="stat-label">Accuracy</div>
            <div class="stat-value">${accuracy}</div>
          </div>
        </div>
      `;

      statsRoot.dataset.enhanced = '1';
    }

    // We don't know exactly when your main JS fills the result,
    // so we watch the DOM and run when the result page becomes visible.
    const observer = new MutationObserver(() => {
      const page = document.getElementById('result-summary-page');
      if (page && !page.classList.contains('hidden')) {
        buildCards();
      }
    });

    observer.observe(document.body, {
      attributes: true,
      childList: true,
      subtree: true
    });
  })();
  
</script>
    <script>
  // Simple toggle for mobile palette drawer
  (function () {
    const toggleBtn = document.getElementById('palette-toggle');
    const backdrop = document.getElementById('palette-backdrop');
    if (!toggleBtn || !backdrop) return;

    function togglePalette() {
      document.body.classList.toggle('palette-open');
    }

    toggleBtn.addEventListener('click', togglePalette);
    backdrop.addEventListener('click', togglePalette);
  })();
</script>

<script>
    
    /**
     * Helper function to safely extract a URL parameter (like 'testId')
     */
    function getUrlParameter(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
    }

    // Get the testId from the URL (e.g., from ?testId=Ssc_cgl_12_sep_s1)
    const testId = getUrlParameter('testId'); 
    
    // Set default values
    let duration = '25 minutes'; 
    let subjectName = 'General Test'; // <--- NEW VARIABLE TO HOLD THE CLEAN SUBJECT NAME

    if (testId) {
        const lowerTestId = testId.toLowerCase();

        // 1. Check for Reasoning/Logic (20 minutes)
        if (lowerTestId.includes('reasoning') || lowerTestId.includes('logic') || lowerTestId.includes('reas') || lowerTestId.includes('r')) {
            duration = '20 minutes';
            subjectName = 'Reasoning'; // <--- SETTING THE SUBJECT NAME
        } 
        // 2. Check for English/Verbal (15 minutes)
        else if (lowerTestId.includes('english') || lowerTestId.includes('verbal') || lowerTestId.includes('eng')) {
            duration = '15 minutes';
            subjectName = 'English'; // <--- SETTING THE SUBJECT NAME
        }
        // 3. Default to Maths/Quant (25 minutes) if no other keywords found
        // Since test names like 'Ssc_cgl_12_sep_s1' usually refer to Quant/Maths by default in the SSC structure, 
        // we'll assign 'Maths' here if we can't find 'English' or 'Reasoning' keywords.
        else {
            duration = '25 minutes';
            subjectName = 'Maths'; // <--- SETTING THE SUBJECT NAME (Fallback)
        }
    }
    
    // Safely update the duration text element
    const durationElement = document.getElementById('duration-text');
    if (durationElement) {
        durationElement.textContent = duration;
    }
    
    // --- UPDATED FUNCTION DEFINITION (REMAINS THE SAME) ---

    function updateTestNameDisplay(currentTestType, differentTestName) {
        const testNameElement = document.getElementById('test-name-display');
        let finalTestName;
        
        // 1. Check if a specific 'different test' name is provided
        if (differentTestName && differentTestName.trim() !== '') {
            finalTestName = differentTestName;
        } else {
            // 2. Use the standard subject name (e.g., 'Reasoning')
            finalTestName = currentTestType.charAt(0).toUpperCase() + currentTestType.slice(1).toLowerCase();
        }
        
        // 3. Update the HTML element
        testNameElement.textContent = finalTestName;
    }

    // üéØ FIX: CALL THE FUNCTION DYNAMICALLY USING THE 'subjectName' VARIABLE
    updateTestNameDisplay(subjectName, ''); 
    
</script>
    
    <script src="js/tests-list.js"></script>
    <script src="js/questions-db.js"></script>
    <script src="js/test-logic.js"></script>
    <script>
</script>
</body>
</html>